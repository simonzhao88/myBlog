<!DOCTYPE html>
{% load static %}
<html>
	<head>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Bootstrap core CSS -->
    <title>登录</title>
{#    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">#}
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function bottonClick(e) {
            window.location.href = "{% url 'mypersonalblog:register' %}"
        }
        function keyLogin() {
            if (event.keyCode==13)
                document.getElementById('login').click()
        }

    </script>
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
        <script>
            $(function () {
                $('#login').click(function (){
        var username = $('#inputUsername').val();
        var password = $('#inputPassword').val();
        if (!username) {
            $('.loginError').html('用户名不符合规范').show();
            return false;}
            if (!password) {
            $('.loginError').html('密码不符合规范').show();
            return false;}
            $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
        });
        $.ajax({
            type: "POST",
            url: 'loginVerify/',
            data: {username: username, password: password, sessionid: sessionid},
            dataType: 'json',
            cache: false,
            success: function (data) {
                if (data == 1) {
                    location.href = "{% url 'mypersonalblog:index' %}";
                }
                    if (data == -1 || data == 0) {
                    $('.loginError').html('用户名不存在或者用户名密码不匹配').show();}},
            error: function () {
                $('.loginError').html('请求失败，请刷新页面后重试').show();}});
        return false;});
            });
        </script>
    <link href="{% static 'css/astyle.css' %}" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="{% static 'css/signin.css' %}" rel="stylesheet">
	<link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <script src="{% static 'js/blog.js' %}"></script>
	</head>
	<body onkeydown="keyLogin();">
		<div class="container" style="margin: 55px;">
			<form class="form-signin">
				<h2 class="form-signin-heading">账号登录</h2>
                <div class="from-group">
				<label for="inputUsername" class="sr-only">Username</label>
				<input type="username" id="inputUsername" class="form-control" placeholder="Username" required autofocus/>
                </div>
                <div class="from-group">
                <label for="inputPassword" class="sr-only">Password</label>
				<input type="password" id="inputPassword" class="form-control" placeholder="Password" required/>
				<label for="inputUsername" class="loginError"></label>
                </div>
                <div class="checkbox">
					<label>
						<input type="checkbox" value="记住账号" />
						记住账号
					</label>
				</div>
				<button id="login" class="btn btn-lg btn-primary btn-block" type="button">登录</button>
				<button id="register" class="btn btn-lg btn-primary btn-block" type="button" onclick="bottonClick()">注册</button>

			</form>
		</div>
		<div class="mastfooter">
				<div class="inner">
					<p>Copyright&copy; 1993-2018 by <a href="#">Simon</a>.</p>
      				<p>
        				<a href="#">Back to top</a>
      				</p>
				</div>
			</div>
	</body>
</html>
